<?php namespace Ip; class User { function loggedIn() { return $this->isLoggedIn(); } function isLoggedIn() { return isset($_SESSION['ipUserId']); } function logout() { if (isset($_SESSION['ipUserId'])) { ipEvent('ipBeforeUserLogout', array('userId' => $this->userId())); unset($_SESSION['ipUserId']); ipEvent('ipUserLogout', array('userId' => $this->userId())); } } function userId() { if (isset($_SESSION['ipUserId'])) { return $_SESSION['ipUserId']; } else { return false; } } function login($id) { ipEvent('ipUserLogin', array('userId' => $id)); $_SESSION['ipUserId'] = $id; } function data($userId = null) { if ($userId === null) { $userId = $this->userId(); } if (!$userId) { return array(); } $info = array( 'userId' => $userId ); $data = array( 'id' => $userId ); return ipFilter('ipUserData', $data, $info); } } ?>